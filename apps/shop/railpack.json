{
  "$schema": "https://schema.railpack.com",
  "steps": {
    "install": {
      "commands": [
        "bash -c 'ROOT=$(pwd); while [ ! -f \"$ROOT/package-lock.json\" ] && [ \"$ROOT\" != \"/\" ]; do ROOT=$(dirname \"$ROOT\"); done; if [ ! -f \"$ROOT/package-lock.json\" ]; then exit 1; fi; cd \"$ROOT\" && npm ci'"
      ]
    },
    "build": {
      "inputs": [
        {
          "step": "install",
          "exclude": ["node_modules"]
        }
      ],
      "commands": [
        "bash -c 'ROOT=$(pwd); while [ ! -f \"$ROOT/package-lock.json\" ] && [ \"$ROOT\" != \"/\" ]; do ROOT=$(dirname \"$ROOT\"); done; if [ ! -f \"$ROOT/package-lock.json\" ]; then exit 1; fi; cd \"$ROOT\" && npx nx build shop --configuration=production'"
      ]
    }
  },
  "deploy": {
    "startCommand": "npx serve -s dist -l $PORT"
  }
}
